
<nav
	class="header-navbar navbar-expand-md navbar navbar-with-menu navbar-without-dd-arrow fixed-top navbar-semi-dark navbar-shadow"
	xmlns:th="http://www.thymeleaf.org" th:fragment="header">
	<div class="navbar-wrapper">
		<div class="navbar-header">
			<ul class="nav navbar-nav flex-row">
				<li class="nav-item mobile-menu d-md-none mr-auto"><a
					class="nav-link nav-menu-main menu-toggle hidden-xs" href="#"><i
						class="ft-menu font-large-1"></i></a></li>
				<li class="nav-item mr-auto"><a class="navbar-brand"> <!-- <img class="brand-logo" alt="modern admin logo" th:src="@{/app-assets/images/logo/logo.png}"> -->
						<h3 class="brand-text">Menu</h3>
				</a></li>
				<li class="nav-item d-none d-md-block float-right"><a
					class="nav-link modern-nav-toggle pr-0" data-toggle="collapse"><i
						class="toggle-icon ft-toggle-right font-medium-3 white"
						data-ticon="ft-toggle-right"></i></a></li>
				<li class="nav-item d-md-none"><a
					class="nav-link open-navbar-container" data-toggle="collapse"
					data-target="#navbar-mobile"><i class="la la-ellipsis-v"></i></a></li>
			</ul>
		</div>
		<div class="navbar-container content">
			<div class="collapse navbar-collapse" id="navbar-mobile">
				<ul class="nav navbar-nav mr-auto float-left">
					<li class="col-md-3 col-lg-3">
						<!-- <span
						th:if="${companymenu.logo != null}"><img
							th:src="@{${baseLocation+companymenu.logo.url}}"
							style="max-width: 100%; height: 37px;" title="TODO" /></span> -->
					</li>

					<li style="text-align: center"><h3 style="margin: 3px">
							<span>Social Media</span>
						</h3></li>

				</ul>
				<ul class="nav navbar-nav float-right">
					<li class="dropdown dropdown-user nav-item"><a
						class="dropdown-toggle nav-link dropdown-user-link" href="#"
						data-toggle="dropdown"> <span class="avatar avatar-online">

								<img
								th:src="@{/app-assets/images/portrait/small/avatar-s-19.png}"
								th:if="${profileimage == null}"
								style="max-width: 100%; height: auto;" title="TODO" alt="avatar">
								<i></i>
						</span>
					</a>
						<div class="dropdown-menu dropdown-menu-right">
							<div class="dropdown-divider"></div>
							<a class="dropdown-item" th:href="@{/logout}"
								th:onclick="'javascript:deleteAllCookies();'"><i
								class="ft-power"></i> Logout</a>
						</div></li>



				</ul>
			</div>
		</div>


	</div>


	<script src="https://js.pusher.com/4.4/pusher.min.js"></script>
	<!-- 	<script th:src="@{/app-assets/vendors/js/vendors.min.js}"
		type="text/javascript"></script> -->
	<script th:src="@{/app-assets/vendors/js/extensions/sweetalert.min.js}"
		type="text/javascript"></script>
	<script
		src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>



	<script th:inline="javascript">
	
	
  /* 	var loaded = [[${loaded}]];
  	var role = [[${rolenamecode}]]; */
  	
  	var loaded="first";
  	
  	console.log("loaded is"+loaded);
  	if(loaded ==="first")
	{
	  setCookie("currentcount","",1); 
    }
  
  
  
  function setCookie(cname, cvalue, exdays) {
	    var d = new Date();
	    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
	    var expires = "expires="+d.toUTCString();
	    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
	}

	function getCookie(cname) {
	    var name = cname + "=";
	    var ca = document.cookie.split(';');
	    for(var i = 0; i < ca.length; i++) {
	        var c = ca[i];
	        while (c.charAt(0) == ' ') {
	            c = c.substring(1);
	        }
	        if (c.indexOf(name) == 0) {
	            return c.substring(name.length, c.length);
	        }
	    }
	    return "";
	}
	
	
	
	/* 	var servercount ;
	  	var currentcount;
	 	 var totalcount ;
	
		if(getCookie("servercount") === "")
		{
			
			servercount =  [[${notificationcount}]];
		}
		else if(getCookie("servercount") === "0")
		{
			servercount = parseInt(getCookie("servercount"));
		}
	  currentcount = getCookie("currentcount"); 
	  
	   if(isNaN(parseInt(currentcount)) && isNaN(parseInt(servercount)))
		{
		   totalcount = 0;
		  
		}
	  else if(isNaN(parseInt(currentcount)))
		{
		  totalcount = parseInt(servercount);
		  
		}
	  else if(isNaN(parseInt(servercount)))
		{
		  totalcount = parseInt(currentcount);
		  
		}
	  else
		{

		  totalcount = parseInt(servercount)+parseInt(currentcount);
		}
	  
	  
	 
	  
	  
	 console.log("servercount number is"+servercount);
	 console.log("currentcount number is"+" "+currentcount);
	 console.log("totalcount"+" "+totalcount);
	 
	 
	 console.log("servercount number from cookie is"+getCookie("servercount"));
	 console.log("currentcount number from cookie is"+" "+getCookie("currentcount"));
	 
	
	 $('.notification-count').text(totalcount);
	 
	 if(totalcount === 0)
		{
		  
		  document.getElementsByClassName("notification-count")[0].innerHTML="";
		}
	  	if(isNaN(totalcount))
	 	{
	 		document.getElementsByClassName("notification-count")[0].innerHTML="";
	 	} 
	 	
  
	
	// document.getElementsByClassName("notification-count")[0].innerHTML="";
	 
	 
   $('.dropdown-notification').on('click',function(){
	  
	  // loadNotification();
	  setCookie("servercount",0,1); 
	  setCookie("currentcount",0,1); 
	  document.getElementsByClassName("notification-count")[0].innerHTML="";
	  $('.notification-tag').text("");
  }) 
   */
  
  function deleteAllCookies() {
		
		setCookie("servercount","",1); 
		setCookie("currentcount","",1); 
		sessionStorage.clear();
	}
  
 
   
   
   
 

  
      var loggedinuserid=[[${loggedinuserid}]];

      var channel =  loggedinuserid + '-channel';
      var event = loggedinuserid +'-event';

  	
 	var  txt

      // Enable pusher logging 
      Pusher.logToConsole = true;

  // development
	     var pusher = new Pusher('011034e1907aeec9422d', {
	     cluster: 'ap1',
	     encrypted: true
	 });                  
	   
	 //production
	  
	     /*  var pusher = new Pusher('03a1365b26033ea0d9a0', {
	      cluster: 'ap1',
	      encrypted: true
	    });   */                
	   
      var channel = pusher.subscribe(channel);

      channel.bind(event, function(data) {
    	  
    	  console.log(data.user);
      //  alert(data.user.name);
     // alert(JSON.stringify(data));
         
    	//  swal({title:data.title}); 
    	
    	  txt="Category: "+data.category+",\n Date: "+data.body;
    	
    	
    	  swal({
  		    title: data.title,
  		    text: txt,//"Category: "+data.category+"\n Date: ",
  		    
  		    buttons: {
  	            cancel: {
  	                text: "Close",
  	                value: null,
  	                visible: true,
  	                className: "",
  	                closeModal: true,
  	            },
  	            confirm: {
  	                text: "View",
  	                value: true,
  	                visible: true,
  	                className: "",
  	                closeModal: false
  	            }
  		    }
  		})
  		.then((isConfirm) => {
  		    if (isConfirm) {
  		    	if(data.category =='Local')
  		    		 window.location = /*[[ @{'/order/view'} ]]*/;
  		    	else if(data.category=='International')
  		    		 window.location = /*[[ @{'/order/international'} ]]*/;
  		    	
  		    	
  		    } 
  		});

    	
      });
      
    
/*       function loadNotification()
  	{
  		
  		
  	}
      
      function viewDetailedNotification(resourceType){
    	  
    	
  		
  	} */
  </script>

</nav>



